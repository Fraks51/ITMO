{"remainingRequest":"/home/vladkuznetsov/Vl/Projects/Web/10/69d03f6d5b6fb009/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vladkuznetsov/Vl/Projects/Web/10/69d03f6d5b6fb009/frontend/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vladkuznetsov/Vl/Projects/Web/10/69d03f6d5b6fb009/frontend/src/App.vue","mtime":1576791195093},{"path":"/home/vladkuznetsov/Vl/Projects/Web/10/69d03f6d5b6fb009/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vladkuznetsov/Vl/Projects/Web/10/69d03f6d5b6fb009/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/vladkuznetsov/Vl/Projects/Web/10/69d03f6d5b6fb009/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vladkuznetsov/Vl/Projects/Web/10/69d03f6d5b6fb009/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIZWFkZXIgZnJvbSAnLi9jb21wb25lbnRzL0hlYWRlcicKaW1wb3J0IE1pZGRsZSBmcm9tICcuL2NvbXBvbmVudHMvTWlkZGxlJwppbXBvcnQgRm9vdGVyIGZyb20gJy4vY29tcG9uZW50cy9Gb290ZXInCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdhcHAnLAogICAgZGF0YTogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHVzZXI6IG51bGwsCiAgICAgICAgICAgIHBvc3RzOiBbXSwKICAgICAgICAgICAgdXNlcnM6IFtdCiAgICAgICAgfQogICAgfSwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBIZWFkZXIsCiAgICAgICAgTWlkZGxlLAogICAgICAgIEZvb3RlcgogICAgfSwgYmVmb3JlQ3JlYXRlKCkgewogICAgICAgIGF4aW9zLmdldCgiL2FwaS8xL3Bvc3RzIikudGhlbihwb3N0cyA9PiB0aGlzLnBvc3RzID0gcG9zdHNbImRhdGEiXSk7CiAgICAgICAgYXhpb3MuZ2V0KCIvYXBpLzEvdXNlcnMiKS50aGVuKHVzZXJzID0+IHRoaXMudXNlcnMgPSB1c2Vyc1siZGF0YSJdKTsKCiAgICAgICAgdGhpcy4kcm9vdC4kb24oIm9uTG9nb3V0IiwgKCkgPT4gewogICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiand0Iik7CiAgICAgICAgICAgIHRoaXMudXNlciA9IG51bGw7CiAgICAgICAgfSk7CgogICAgICAgIHRoaXMuJHJvb3QuJG9uKCJvbkp3dCIsIChqd3QsIGVudGVyKSA9PiB7CiAgICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMgPSB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIgKyBqd3QKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGF4aW9zLmdldCgiL2FwaS8xL3VzZXJzL2F1dGhvcml6ZWQiKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgIHRoaXMudXNlciA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICBpZiAoZW50ZXIpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkVudGVyU3VjY2VzcyIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgdGhpcy4kcm9vdC4kb24oIm9uRW50ZXIiLCAobG9naW4sIHBhc3N3b3JkKSA9PiB7CiAgICAgICAgICAgIGF4aW9zLnBvc3QoIi9hcGkvMS9qd3QiLCB7CiAgICAgICAgICAgICAgICBsb2dpbjogbG9naW4sCiAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiand0IiwgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkp3dCIsIHJlc3BvbnNlLmRhdGEsIHRydWUpOwogICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkVudGVyVmFsaWRhdGlvbkVycm9yIiwgZXJyb3IucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICB0aGlzLiRyb290LiRvbigib25BZGRQb3N0IiwgKHRpdGxlLCB0ZXh0KSA9PiB7CiAgICAgICAgICAgIGlmICh0aGlzLnVzZXIgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgib25BZGRQb3N0VmFsaWRhdGlvbkVycm9yIiwgIldITyBBUkUgWU9VPz8/Iik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAodGl0bGUubGVuZ3RoIDwgMSB8fCB0aXRsZS5sZW5ndGggPiAxNSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIm9uQWRkUG9zdFZhbGlkYXRpb25FcnJvciIsICJZb3VyIHRpdGxlIGhhdmUgYSBiYWQgbGVuZ3RoLiBNdXN0IFsxOyAxNV0uIFlvdXIgLSAiICsgdGl0bGUubGVuZ3RoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRleHQubGVuZ3RoIDwgMSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkFkZFBvc3RWYWxpZGF0aW9uRXJyb3IiLCAiWW91ciB0ZXh0IG11c3QgYmUgbm90IGVtcHR5Iik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXhpb3MucG9zdCgiL2FwaS8xL3Bvc3RzIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGV4dAogICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4aW9zLmdldCgiL2FwaS8xL3Bvc3RzIikudGhlbihwb3N0cyA9PiB0aGlzLnBvc3RzID0gcG9zdHNbImRhdGEiXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgib25DaGFuZ2VQYWdlIiwgJ0luZGV4Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIm9uRW50ZXJWYWxpZGF0aW9uRXJyb3IiLCBlcnJvci5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIHRoaXMuJHJvb3QuJG9uKCJvblJlZ2lzdGVyIiwgKGxvZ2luLCBwYXNzd29yZCwgbmFtZSkgPT4gewogICAgICAgICAgICBpZiAoIS9eW2Etel0rJC8udGVzdChsb2dpbikgfHwgbG9naW4ubGVuZ3RoIDwgMyB8fCBsb2dpbi5sZW5ndGggPiAxNikgewogICAgICAgICAgICAgICAgLy8gbG9naW4gaXMgaW52YWxpZAogICAgICAgICAgICAgICAgaWYgKCEvXlthLXpdKyQvLnRlc3QobG9naW4pKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgib25SZWdpc3RlclZhbGlkYXRpb25FcnJvciIsICJMb2dpbiBpcyB1bmNvcnJlY3RlZC4gT25seSBzbWFsbCBMYXRpbiEiKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgib25SZWdpc3RlclZhbGlkYXRpb25FcnJvciIsICJMb2dpbiBpcyB1bmNvcnJlY3RlZC4gTGVuZ3RoIG11c3QgYmUgb24gWzMsIDE2XSIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYgKHBhc3N3b3JkLmxlbmd0aCA8IDQgfHwgcGFzc3dvcmQubGVuZ3RoID4gMzIpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvblJlZ2lzdGVyVmFsaWRhdGlvbkVycm9yIiwgIlBhc3N3b3JkIGlzIHVuY29ycmVjdGVkLiBMZW5ndGggbXVzdCBiZSBvbiBbNCwgMzJdLiBZb3VyIC0gIiArIHBhc3N3b3JkLmxlbmd0aCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmIChuYW1lLmxlbmd0aCA8IDEgfHwgbmFtZS5sZW5ndGggPiAzMikgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvblJlZ2lzdGVyVmFsaWRhdGlvbkVycm9yIiwgIk5hbWUgaXMgdW5jb3JyZWN0ZWQuIExlbmd0aCBtdXN0IGJlIG9uIFsxLCAzMl0uIFlvdXIgLSAiICsgbmFtZS5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoIi9hcGkvMS91c2VycyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2luOiBsb2dpbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiand0IiwgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGlvcy5nZXQoIi9hcGkvMS91c2VycyIpLnRoZW4odXNlcnMgPT4gdGhpcy51c2VycyA9IHVzZXJzWyJkYXRhIl0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgib25Kd3QiLCByZXNwb25zZS5kYXRhLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgib25SZWdpc3RlclZhbGlkYXRpb25FcnJvciIsIGVycm9yLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgdGhpcy4kcm9vdC4kb24oIm9uQWRkQ29tbWVudCIsIChwb3N0SWQsIHRleHQpID0+IHsKICAgICAgICAgICAgaWYgKHRoaXMudXNlciA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkNvbW1lbnRQb3N0VmFsaWRhdGlvbkVycm9yIiwgIldITyBBUkUgWU9VPz8/Iik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAodGV4dC5sZW5ndGggPCAxKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgib25BZGRDb21tZW50VmFsaWRhdGlvbkVycm9yIiwgIllvdXIgdGV4dCBtdXN0IGJlIG5vdCBlbXB0eSIpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBheGlvcy5wb3N0KCIvYXBpLzEvY29tbWVudCIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgcG9zdElkOiBwb3N0SWQudG9TdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGV4dAogICAgICAgICAgICAgICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBheGlvcy5nZXQoIi9hcGkvMS9wb3N0cyIpLnRoZW4ocG9zdHMgPT4gdGhpcy5wb3N0cyA9IHBvc3RzWyJkYXRhIl0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkNoYW5nZVBhZ2UiLCAnSW5kZXgnKTsKICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIm9uQ29tbWVudFZhbGlkYXRpb25FcnJvciIsIGVycm9yLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgIH0sIGJlZm9yZU1vdW50KCkgewogICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiand0IikgJiYgIXRoaXMudXNlcikgewogICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkp3dCIsIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJqd3QiKSwgdHJ1ZSk7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;AAUA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n    <!--suppress HtmlUnknownTag -->\n    <body id=\"app\">\n    <Header :user=\"user\"/>\n    <Middle :posts=\"posts\" :users=\"users\" :user=\"user\"/>\n    <Footer/>\n    </body>\n</template>\n\n<script>\n    import Header from './components/Header'\n    import Middle from './components/Middle'\n    import Footer from './components/Footer'\n    import axios from 'axios'\n\n    export default {\n        name: 'app',\n        data: function () {\n            return {\n                user: null,\n                posts: [],\n                users: []\n            }\n        },\n        components: {\n            Header,\n            Middle,\n            Footer\n        }, beforeCreate() {\n            axios.get(\"/api/1/posts\").then(posts => this.posts = posts[\"data\"]);\n            axios.get(\"/api/1/users\").then(users => this.users = users[\"data\"]);\n\n            this.$root.$on(\"onLogout\", () => {\n                localStorage.removeItem(\"jwt\");\n                this.user = null;\n            });\n\n            this.$root.$on(\"onJwt\", (jwt, enter) => {\n                axios.defaults.headers = {\n                    Authorization: \"Bearer \" + jwt\n                };\n\n                axios.get(\"/api/1/users/authorized\").then(response => {\n                    this.user = response.data;\n                    if (enter) {\n                        this.$root.$emit(\"onEnterSuccess\");\n                    }\n                });\n            });\n\n            this.$root.$on(\"onEnter\", (login, password) => {\n                axios.post(\"/api/1/jwt\", {\n                    login: login,\n                    password: password\n                }).then(response => {\n                    localStorage.setItem(\"jwt\", response.data);\n                    this.$root.$emit(\"onJwt\", response.data, true);\n                }).catch(error => {\n                    this.$root.$emit(\"onEnterValidationError\", error.response.data);\n                });\n            });\n\n            this.$root.$on(\"onAddPost\", (title, text) => {\n                if (this.user == null) {\n                    this.$root.$emit(\"onAddPostValidationError\", \"WHO ARE YOU???\");\n                } else {\n                    if (title.length < 1 || title.length > 15) {\n                        this.$root.$emit(\"onAddPostValidationError\", \"Your title have a bad length. Must [1; 15]. Your - \" + title.length);\n                    } else {\n                        if (text.length < 1) {\n                            this.$root.$emit(\"onAddPostValidationError\", \"Your text must be not empty\");\n                        } else {\n                            axios.post(\"/api/1/posts\", {\n                                title: title,\n                                text: text\n                            }).then(response => {\n                                axios.get(\"/api/1/posts\").then(posts => this.posts = posts[\"data\"]);\n                                response.data;\n                                this.$root.$emit(\"onChangePage\", 'Index');\n                            }).catch(error => {\n                                this.$root.$emit(\"onEnterValidationError\", error.response.data);\n                            });\n                        }\n                    }\n                }\n            });\n\n            this.$root.$on(\"onRegister\", (login, password, name) => {\n                if (!/^[a-z]+$/.test(login) || login.length < 3 || login.length > 16) {\n                    // login is invalid\n                    if (!/^[a-z]+$/.test(login)) {\n                        this.$root.$emit(\"onRegisterValidationError\", \"Login is uncorrected. Only small Latin!\");\n                    } else {\n                        this.$root.$emit(\"onRegisterValidationError\", \"Login is uncorrected. Length must be on [3, 16]\");\n                    }\n                } else {\n                    if (password.length < 4 || password.length > 32) {\n                        this.$root.$emit(\"onRegisterValidationError\", \"Password is uncorrected. Length must be on [4, 32]. Your - \" + password.length);\n                    } else {\n                        if (name.length < 1 || name.length > 32) {\n                            this.$root.$emit(\"onRegisterValidationError\", \"Name is uncorrected. Length must be on [1, 32]. Your - \" + name.length);\n                        } else {\n                            axios.post(\"/api/1/users\", {\n                                login: login,\n                                password: password,\n                                name: name\n                            }).then(response => {\n                                localStorage.setItem(\"jwt\", response.data);\n                                axios.get(\"/api/1/users\").then(users => this.users = users[\"data\"]);\n                                this.$root.$emit(\"onJwt\", response.data, true);\n                            }).catch(error => {\n                                this.$root.$emit(\"onRegisterValidationError\", error.response.data);\n                            });\n                        }\n                    }\n                }\n            });\n\n            this.$root.$on(\"onAddComment\", (postId, text) => {\n                if (this.user == null) {\n                    this.$root.$emit(\"onCommentPostValidationError\", \"WHO ARE YOU???\");\n                } else {\n                    if (text.length < 1) {\n                        this.$root.$emit(\"onAddCommentValidationError\", \"Your text must be not empty\");\n                    } else {\n                        axios.post(\"/api/1/comment\", {\n                            postId: postId.toString(),\n                            text: text\n                        }).then(response => {\n                            axios.get(\"/api/1/posts\").then(posts => this.posts = posts[\"data\"]);\n                            response.data;\n                            this.$root.$emit(\"onChangePage\", 'Index');\n                        }).catch(error => {\n                            this.$root.$emit(\"onCommentValidationError\", error.response.data);\n                        });\n                    }\n\n                }\n            });\n\n        }, beforeMount() {\n            if (localStorage.getItem(\"jwt\") && !this.user) {\n                this.$root.$emit(\"onJwt\", localStorage.getItem(\"jwt\"), true);\n            }\n        }\n    }\n</script>\n\n<style>\n</style>\n"]}]}